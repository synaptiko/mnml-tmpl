<!DOCTYPE html>
<script src="TextMountPoint.js"></script>
<script src="HtmlMountPoint.js"></script>
<script src="Template.js"></script>
<body>
	<script>
		var template = [
			'<div class="something {baseCls} {cls} nothing">',
				'<h1>Title: {title} - {testName}!!</h1>',
				'<a href="http://{host}/test.html">Test of {testName}</a> <span class="hidden">{testName}</span>',
				'<div>{!! myHtml}</div>', // for insertion of html
				'<div>text around {!! myHtml} !!!</div>', // for insertion of html
				'<div>{title}{!! myHtml}{!! myAnotherHtml}{title}</div>', // for insertion of html
				'{amphibian}{!! amphibian}', // for insertion of html
				'<br/><br/>',
				'<div>{# subtemplate}</div>', // for insertion of reference to dom
				'<div events={item}>Load more...</div>', // for event-mounting
			'</div>'
		];
		var subtemplate = [
			'<div>',
				'<h3>H3 H3 {h3} H3 H3</h3>',
			'</div>'
		];

		console.time('template');
		subtemplate = new Template(subtemplate, {
			h3: 'subtemplate - test'
		});
		template = new Template(template, {
			baseCls: 'panel',
			cls: 'news',
			title: '<!-- & I\'m XXS free -->',
			host: 'synaptiko.cz',
			testName: 'Template',
			myHtml: '<b>pinguin <i>with pizza</i></b>',
			myAnotherHtml: 'Bla bla <strong>Bla</strong> bla bla <span style="font-weight: bold; color: red;">Test!</span>',
			amphibian: '<strong>&amp;</strong>',
			subtemplate: subtemplate.getEl()
		});
		console.timeEnd('template');
		document.body.appendChild(template.getEl());

		setInterval(function() {
			var nr = Math.floor(Math.random() * 10000);
			console.time('update');
			template.update({
				baseCls: 'panel' + nr,
				cls: 'news' + nr,
				title: '<!-- & I\'m XXS free -->' + nr,
				host: 'synaptiko.cz' + nr,
				testName: 'Template' + nr,
				myHtml: '<b>pinguin <i>with ' + nr + ' pizza</i></b>',
				myAnotherHtml: 'Bla bla <strong>Bla' + nr + '</strong> bla bla <span style="font-weight: bold; color: red;">Test!</span>',
				amphibian: '<strong>&amp;' + nr + '</strong>'
			});
			console.timeEnd('update');
		}, 5000);

		setInterval(function() {
			var nr = Math.floor(Math.random() * 10000);
			console.time('update');
			subtemplate.update({ h3: 'ch ' + nr + ' ch' });
			console.timeEnd('update');
		}, 4000);

		// TODO add possibility for list of elements: dynamically added/removed elements (similar to {# ...})
		// TODO add formatters to new Template()
		// TODO how to add "mount-points" for events
		// TODO template.on()
		// TODO template.un()
		// TODO template.clone()
	</script>
</body>
